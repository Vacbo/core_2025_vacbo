## 2. Metodologia

Para a estruturação do processador, optou-se por uma metodologia de
desenvolvimento hierárquico modularizado, a fim de facilitar que futuramente
seja feita a implementação de tolerância a falhas, por meio de tripla votação -
redundância de componentes para o caso de um falhar, onde os outros são usados
para definir o valor correto a ser considerado - , por exemplo.

A modularização hierárquica do projeto se deu por uma divisão do processador em
diferentes níveis durante a sua implementação:

- O nível mais baixo corresponde ao nível dos componentes, sejam eles genéricos
  (como multiplexadores) ou específicos da arquitetura RISC-V (como a unidade de
  controle), como está ilustrado a seguir. Vale mencionar que se planeja
  implementar os registradores da pipeline nas etapas ID, EX, MEM e WB

![](/images/reference/components/nivel_componentes.drawio.svg "**Figura 2** - Diagrama dos componentes implementados")

Em seguida, o nível dos módulos, onde são implementados os componentes; 


![](/images/reference/components/nivel_modulos.drawio.svg "**Figura 3** - Diagrama dos módulos implementados")

- Há, então, o nível das etapas, é nesse nível que se encontram os módulos, e como mencionado anteriormente, onde estão implementados os registradores da pipeline. Há de se mencionar, que devido ao fato de o cliente querer usar memórias externas ao processador, a etapa MEM que teria o módulo de memória correspondente ao uso da memória RAM, fica atualmente sendo apenas uma etapa que atua como registrador da pipeline, pois a memória é acessada no nível superior;

![](/images/reference/components/nivel_etapas.drawio.svg "**Figura 4** - Diagrama das etapas implementados")

- Por fim, o nível mais alto é o nível superior, onde ocorre a integração das etapas, e o acesso às memórias externas.

![](/images/reference/components/nivel_superior.drawio.svg "**Figura 5** - Diagrama das etapas implementados")

### 2.1 Coleta de dados sobre o projeto

Os dados utilizados para realização deste projeto vieram de material, físico e digital, que os membros do grupo encontraram enquanto pesquisavam sobre o assunto, de conteúdo ensinado no curso de Engenharia de Computação, em específico na matéria de Design de Computadores lecionada por Paulo Carlos Ferreira dos Santos, de material que o orientador forneceu para ajudar na realização do projeto, de informações fornecidas pelo cliente, e de material que Rodrigo de Marca França forneceu.

No que se refere ao material encontrado pelo grupo para realização do projeto, foi essencial o uso da documentação sobre a arquitetura de conjunto de instruções RISC-V fornecida pela RISC-V International, que é uma entidade sem fins lucrativos sediada na suíça à qual o Brasil se juntou no final de fevereiro de 2024 e que busca manter a neutralidade do desenvolvimento dessa arquitetura. Além disso, o grupo também encontrou um simulador web de um processador RISC-V com conjunto base de instruções para inteiros com extensão para multiplicação que funciona para uma arquitetura de 32 bits, que é precisamente o foco para este projeto, e auxiliou para que o fosse possível visualizar como que a arquitetura  seria implementada de forma, e mostrou uma forma de como as instruções interagem com esse tipo de processador.

Já o conteúdo que o grupo aprendeu realizando a matéria Design de Computadores, se refere ao desenvolvimento de um processador de arquitetura MIPS em VHDL usando o Quartus, que serviu como base de conhecimento para o desenvlvimento do projeto, assim como o desenvolvimento de um assembler em python para ajudar na realização de testes do processador. Vale complementar que além do conhecimento adquirido nessa matéria, o grupo também aprendeu no curso de Engenharia da Computação a trabalhar com ferramentas como Docker, GitHub, GitHub Actions, Python e VSCode, o que resultou no estruturamento da metodologia de desenvolvimento deste projeto.

Por sua vez, se tratando do material fornecido pelo orientador, o mais importante foi um repositório com componentes desenvolvidos em VHDL, onde os mesmos eram sintetizados usando GHDL, seus testes eram realizados usando Cocotb e Pytest, sendo que essas foram as ferramentas utilizadas pelo grupo para realizar os testes unitários e de integração de sistemas durante o projeto. Além disso, ele também forneceu livros que ajudaram no estudo da arquitetura e das suas instruções.

Já no que se refere às informações fornecidas pelos clientes, está a necessidade de modularização mencionada anteriormente na metodologia, assim como feedback sobre os caminhos que o grupo optou por seguir ao longo do processo de desenvolvimento.

Por fim, o material fornecido por Rodrigo de Marca França foi o material de referência da agência espacial europeia, a ESA (European Space Agency).

## 2.2 Análise dos Dados Coletados

Na documentação sobre a arquitetura fornecida pelos materiais utilizados estão detalhadas as instruções que compõem o conjunto base de instruções para inteiros de 32 bits, sua estrutura e como elas funcionam, e o mesmo se aplica às instruções que compõem a extensão de multiplicação do processador (olhar Anexo A para mais informações sobre os conjuntos de instruções).

As instruções do conjunto base de inteiros são 40 no total, porém o grupo não vai implementar 3 destas instruções (ECALL, EBREAK e FENCE) por elas serem de uso de processadores superescalares, que não faz parte do escopo. O conjunto de instruções da extensão de multiplicação serão implementadas se for factível a depender do tempo que sobrar após o grupo terminar de desenvolver o processador funcional com as instruções do conjunto base implementadas.

Baseado nos conhecimentos adquiridos no curso de Engenharia de Computação, o grupo decidiu usar o GitHub Actions para automatizar o processo de testes CI/CD solicitados pelo cliente, e o Docker para padronizar o sistema operacional de desenvolvimento. Com o feedback positivo do cliente, essa metodologia de desenvolvimento se tornou parte essencial da entrega do projeto.

